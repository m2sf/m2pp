(*!m2pim*) (* Copyright (c) 2017 Modula-2 Software Foundation *)

DEFINITION MODULE StrBlank;

(* String Blanks used internally by Module String *)


CONST MaxLength = 4095;


(* Blank types *)

(* size increments of 1 *)
TYPE AOC0  = ARRAY [0.. 0] OF CHAR; (* capacity 0,  size  1 *)
TYPE AOC1  = ARRAY [0.. 1] OF CHAR; (* capacity 1,  size  2 *)
TYPE AOC2  = ARRAY [0.. 2] OF CHAR; (* capacity 2,  size  3 *)
TYPE AOC3  = ARRAY [0.. 3] OF CHAR; (* capacity 3,  size  4 *)
TYPE AOC4  = ARRAY [0.. 4] OF CHAR; (* capacity 4,  size  5 *)
TYPE AOC5  = ARRAY [0.. 5] OF CHAR; (* capacity 5,  size  6 *)
TYPE AOC6  = ARRAY [0.. 6] OF CHAR; (* capacity 6,  size  7 *)
TYPE AOC7  = ARRAY [0.. 7] OF CHAR; (* capacity 7,  size  8 *)
TYPE AOC8  = ARRAY [0.. 8] OF CHAR; (* capacity 8,  size  9 *)
TYPE AOC9  = ARRAY [0.. 9] OF CHAR; (* capacity 9,  size 10 *)
TYPE AOC10 = ARRAY [0..10] OF CHAR; (* capacity 10, size 11 *)
TYPE AOC11 = ARRAY [0..11] OF CHAR; (* capacity 11, size 12 *)
TYPE AOC12 = ARRAY [0..12] OF CHAR; (* capacity 12, size 13 *)
TYPE AOC13 = ARRAY [0..13] OF CHAR; (* capacity 13, size 14 *)
TYPE AOC14 = ARRAY [0..14] OF CHAR; (* capacity 14, size 15 *)
TYPE AOC15 = ARRAY [0..15] OF CHAR; (* capacity 15, size 16 *)
TYPE AOC16 = ARRAY [0..16] OF CHAR; (* capacity 16, size 17 *)
TYPE AOC17 = ARRAY [0..17] OF CHAR; (* capacity 17, size 18 *)
TYPE AOC18 = ARRAY [0..18] OF CHAR; (* capacity 18, size 19 *)
TYPE AOC19 = ARRAY [0..19] OF CHAR; (* capacity 19, size 20 *)
TYPE AOC20 = ARRAY [0..20] OF CHAR; (* capacity 20, size 21 *)
TYPE AOC21 = ARRAY [0..21] OF CHAR; (* capacity 21, size 22 *)
TYPE AOC22 = ARRAY [0..22] OF CHAR; (* capacity 22, size 23 *)
TYPE AOC23 = ARRAY [0..23] OF CHAR; (* capacity 23, size 24 *)
TYPE AOC24 = ARRAY [0..24] OF CHAR; (* capacity 24, size 25 *)
TYPE AOC25 = ARRAY [0..25] OF CHAR; (* capacity 25, size 26 *)
TYPE AOC26 = ARRAY [0..26] OF CHAR; (* capacity 26, size 27 *)
TYPE AOC27 = ARRAY [0..27] OF CHAR; (* capacity 27, size 28 *)
TYPE AOC28 = ARRAY [0..28] OF CHAR; (* capacity 28, size 29 *)
TYPE AOC29 = ARRAY [0..29] OF CHAR; (* capacity 29, size 30 *)
TYPE AOC30 = ARRAY [0..30] OF CHAR; (* capacity 30, size 31 *)
TYPE AOC31 = ARRAY [0..31] OF CHAR; (* capacity 31, size 32 *)
TYPE AOC32 = ARRAY [0..32] OF CHAR; (* capacity 32, size 33 *)
TYPE AOC33 = ARRAY [0..33] OF CHAR; (* capacity 33, size 34 *)
TYPE AOC34 = ARRAY [0..34] OF CHAR; (* capacity 34, size 35 *)
TYPE AOC35 = ARRAY [0..35] OF CHAR; (* capacity 35, size 36 *)
TYPE AOC36 = ARRAY [0..36] OF CHAR; (* capacity 36, size 37 *)
TYPE AOC37 = ARRAY [0..37] OF CHAR; (* capacity 37, size 38 *)
TYPE AOC38 = ARRAY [0..38] OF CHAR; (* capacity 38, size 39 *)
TYPE AOC39 = ARRAY [0..39] OF CHAR; (* capacity 39, size 40 *)
TYPE AOC40 = ARRAY [0..40] OF CHAR; (* capacity 40, size 41 *)
TYPE AOC41 = ARRAY [0..41] OF CHAR; (* capacity 41, size 42 *)
TYPE AOC42 = ARRAY [0..42] OF CHAR; (* capacity 42, size 43 *)
TYPE AOC43 = ARRAY [0..43] OF CHAR; (* capacity 43, size 44 *)
TYPE AOC44 = ARRAY [0..44] OF CHAR; (* capacity 44, size 45 *)
TYPE AOC45 = ARRAY [0..45] OF CHAR; (* capacity 45, size 46 *)
TYPE AOC46 = ARRAY [0..46] OF CHAR; (* capacity 46, size 47 *)
TYPE AOC47 = ARRAY [0..47] OF CHAR; (* capacity 47, size 48 *)
TYPE AOC48 = ARRAY [0..48] OF CHAR; (* capacity 48, size 49 *)
TYPE AOC49 = ARRAY [0..49] OF CHAR; (* capacity 49, size 50 *)
TYPE AOC50 = ARRAY [0..50] OF CHAR; (* capacity 50, size 51 *)
TYPE AOC51 = ARRAY [0..51] OF CHAR; (* capacity 51, size 52 *)
TYPE AOC52 = ARRAY [0..52] OF CHAR; (* capacity 52, size 53 *)
TYPE AOC53 = ARRAY [0..53] OF CHAR; (* capacity 53, size 54 *)
TYPE AOC54 = ARRAY [0..54] OF CHAR; (* capacity 54, size 55 *)
TYPE AOC55 = ARRAY [0..55] OF CHAR; (* capacity 55, size 56 *)
TYPE AOC56 = ARRAY [0..56] OF CHAR; (* capacity 56, size 57 *)
TYPE AOC57 = ARRAY [0..57] OF CHAR; (* capacity 57, size 58 *)
TYPE AOC58 = ARRAY [0..58] OF CHAR; (* capacity 58, size 59 *)
TYPE AOC59 = ARRAY [0..59] OF CHAR; (* capacity 59, size 60 *)
TYPE AOC60 = ARRAY [0..60] OF CHAR; (* capacity 60, size 61 *)
TYPE AOC61 = ARRAY [0..61] OF CHAR; (* capacity 61, size 62 *)
TYPE AOC62 = ARRAY [0..62] OF CHAR; (* capacity 62, size 63 *)
TYPE AOC63 = ARRAY [0..63] OF CHAR; (* capacity 63, size 64 *)
TYPE AOC64 = ARRAY [0..64] OF CHAR; (* capacity 64, size 65 *)
TYPE AOC65 = ARRAY [0..65] OF CHAR; (* capacity 65, size 66 *)
TYPE AOC66 = ARRAY [0..66] OF CHAR; (* capacity 66, size 67 *)
TYPE AOC67 = ARRAY [0..67] OF CHAR; (* capacity 67, size 68 *)
TYPE AOC68 = ARRAY [0..68] OF CHAR; (* capacity 68, size 69 *)
TYPE AOC69 = ARRAY [0..69] OF CHAR; (* capacity 69, size 70 *)
TYPE AOC70 = ARRAY [0..70] OF CHAR; (* capacity 70, size 71 *)
TYPE AOC71 = ARRAY [0..71] OF CHAR; (* capacity 71, size 72 *)
TYPE AOC72 = ARRAY [0..72] OF CHAR; (* capacity 72, size 73 *)
TYPE AOC73 = ARRAY [0..73] OF CHAR; (* capacity 73, size 74 *)
TYPE AOC74 = ARRAY [0..74] OF CHAR; (* capacity 74, size 75 *)
TYPE AOC75 = ARRAY [0..75] OF CHAR; (* capacity 75, size 76 *)
TYPE AOC76 = ARRAY [0..76] OF CHAR; (* capacity 76, size 77 *)
TYPE AOC77 = ARRAY [0..77] OF CHAR; (* capacity 77, size 78 *)
TYPE AOC78 = ARRAY [0..78] OF CHAR; (* capacity 78, size 79 *)
TYPE AOC79 = ARRAY [0..79] OF CHAR; (* capacity 79, size 80 *)

(* size increments of 8 *)
TYPE AOC87 = ARRAY [0..87] OF CHAR; (* capacity 87, size 88 *)
TYPE AOC95 = ARRAY [0..95] OF CHAR; (* capacity 95, size 96 *)

(* size increments of 16 *)
TYPE AOC111 = ARRAY [0..111] OF CHAR; (* capacity 111, size 112 *)
TYPE AOC127 = ARRAY [0..127] OF CHAR; (* capacity 127, size 128 *)

(* size increments of 64 *)
TYPE AOC191 = ARRAY [0..191] OF CHAR; (* capacity 191, size 192 *)
TYPE AOC255 = ARRAY [0..255] OF CHAR; (* capacity 255, size 256 *)

(* size increments of 256 *)
TYPE AOC511  =  ARRAY [0.. 511] OF CHAR; (* capacity 511,  size  512 *)
TYPE AOC767  =  ARRAY [0.. 767] OF CHAR; (* capacity 767,  size  768 *)
TYPE AOC1023 =  ARRAY [0..1023] OF CHAR; (* capacity 1023, size 1024 *)
TYPE AOC1279 =  ARRAY [0..1279] OF CHAR; (* capacity 1279, size 1280 *)
TYPE AOC1535 =  ARRAY [0..1535] OF CHAR; (* capacity 1535, size 1536 *)
TYPE AOC1791 =  ARRAY [0..1791] OF CHAR; (* capacity 1791, size 1792 *)
TYPE AOC2047 =  ARRAY [0..2047] OF CHAR; (* capacity 2047, size 2048 *)

(* size increments of 512 *)
TYPE AOC2559 =  ARRAY [0..2559] OF CHAR; (* capacity 2559, size 2560 *)
TYPE AOC3071 =  ARRAY [0..3071] OF CHAR; (* capacity 3071, size 3072 *)

(* size increment of 1024 *)
TYPE AOC4095 =  ARRAY [0..4095] OF CHAR; (* capacity 4095, size 4096 *)


(* Alias for largest blank type *)

TYPE Largest = AOC4095;


(* ---------------------------------------------------------------------------
 * function StrBlank.allocSizeForStrLen(strlen)
 * ---------------------------------------------------------------------------
 * Returns the allocation size for a blank of length strlen as follows:
 * 
 * case | strlen       | offset | size      | blank type
 * -----+--------------+--------+-----------+-----------
 *  (0) |    0 ..   79 |     +1 |  strlen+1 | AOC0-AOC79
 * -----+--------------+--------+-----------+-----------
 *  (1) |   80 ..   87 |     +8 |        88 |      AOC87
 *  (2) |   88 ..   95 |     +8 |        96 |      AOC95
 * -----+--------------+--------+-----------+-----------
 *  (3) |   96 ..  111 |    +16 |       112 |     AOC111
 *  (4) |  112 ..  127 |    +16 |       128 |     AOC127
 * -----+--------------+--------+-----------+-----------
 *  (5) |  128 ..  191 |    +64 |       192 |     AOC191
 *  (6) |  192 ..  255 |    +64 |       256 |     AOC255
 * -----+--------------+--------+-----------+-----------
 *  (7) |  256 ..  511 |   +256 |       512 |     AOC511
 *  (8) |  512 ..  767 |   +256 |       768 |     AOC767
 *  (9) |  768 .. 1023 |   +256 |      1024 |    AOC1023
 * (10) | 1024 .. 1279 |   +256 |      1280 |    AOC1279
 * (11) | 1280 .. 1535 |   +256 |      1536 |    AOC1535
 * (12) | 1536 .. 1791 |   +256 |      1792 |    AOC1791
 * (13) | 1792 .. 2047 |   +256 |      2048 |    AOC2047
 * -----+--------------+--------+-----------+-----------
 * (14) | 2048 .. 2559 |   +512 |      2560 |    AOC2559
 * (15) | 2560 .. 3071 |   +512 |      3072 |    AOC3071
 * -----+--------------+--------+-----------+-----------
 * (16) |      >= 3072 |  +1024 | MaxLength |    Largest
 * ------------------------------------------------------------------------ *)

PROCEDURE allocSizeForStrLen ( strlen : CARDINAL ) : CARDINAL;


END StrBlank.