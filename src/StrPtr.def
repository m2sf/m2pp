(*!m2pim*) (* Copyright (c) 2017 Modula-2 Software Foundation *)

DEFINITION MODULE StrPtr;

(* ARRAY OF CHAR Pointer Types and Allocation Sizes used by Module String *)


CONST MaxLength = 4095;


(* AOC pointer types *)

(* size increments of 1 *)
TYPE AOC0  = POINTER TO ARRAY [0.. 0] OF CHAR; (* size  1 *)
TYPE AOC1  = POINTER TO ARRAY [0.. 1] OF CHAR; (* size  2 *)
TYPE AOC2  = POINTER TO ARRAY [0.. 2] OF CHAR; (* size  3 *)
TYPE AOC3  = POINTER TO ARRAY [0.. 3] OF CHAR; (* size  4 *)
TYPE AOC4  = POINTER TO ARRAY [0.. 4] OF CHAR; (* size  5 *)
TYPE AOC5  = POINTER TO ARRAY [0.. 5] OF CHAR; (* size  6 *)
TYPE AOC6  = POINTER TO ARRAY [0.. 6] OF CHAR; (* size  7 *)
TYPE AOC7  = POINTER TO ARRAY [0.. 7] OF CHAR; (* size  8 *)
TYPE AOC8  = POINTER TO ARRAY [0.. 8] OF CHAR; (* size  9 *)
TYPE AOC9  = POINTER TO ARRAY [0.. 9] OF CHAR; (* size 10 *)
TYPE AOC10 = POINTER TO ARRAY [0..10] OF CHAR; (* size 11 *)
TYPE AOC11 = POINTER TO ARRAY [0..11] OF CHAR; (* size 12 *)
TYPE AOC12 = POINTER TO ARRAY [0..12] OF CHAR; (* size 13 *)
TYPE AOC13 = POINTER TO ARRAY [0..13] OF CHAR; (* size 14 *)
TYPE AOC14 = POINTER TO ARRAY [0..14] OF CHAR; (* size 15 *)
TYPE AOC15 = POINTER TO ARRAY [0..15] OF CHAR; (* size 16 *)
TYPE AOC16 = POINTER TO ARRAY [0..16] OF CHAR; (* size 17 *)
TYPE AOC17 = POINTER TO ARRAY [0..17] OF CHAR; (* size 18 *)
TYPE AOC18 = POINTER TO ARRAY [0..18] OF CHAR; (* size 19 *)
TYPE AOC19 = POINTER TO ARRAY [0..19] OF CHAR; (* size 20 *)
TYPE AOC20 = POINTER TO ARRAY [0..20] OF CHAR; (* size 21 *)
TYPE AOC21 = POINTER TO ARRAY [0..21] OF CHAR; (* size 22 *)
TYPE AOC22 = POINTER TO ARRAY [0..22] OF CHAR; (* size 23 *)
TYPE AOC23 = POINTER TO ARRAY [0..23] OF CHAR; (* size 24 *)
TYPE AOC24 = POINTER TO ARRAY [0..24] OF CHAR; (* size 25 *)
TYPE AOC25 = POINTER TO ARRAY [0..25] OF CHAR; (* size 26 *)
TYPE AOC26 = POINTER TO ARRAY [0..26] OF CHAR; (* size 27 *)
TYPE AOC27 = POINTER TO ARRAY [0..27] OF CHAR; (* size 28 *)
TYPE AOC28 = POINTER TO ARRAY [0..28] OF CHAR; (* size 29 *)
TYPE AOC29 = POINTER TO ARRAY [0..29] OF CHAR; (* size 30 *)
TYPE AOC30 = POINTER TO ARRAY [0..30] OF CHAR; (* size 31 *)
TYPE AOC31 = POINTER TO ARRAY [0..31] OF CHAR; (* size 32 *)
TYPE AOC32 = POINTER TO ARRAY [0..32] OF CHAR; (* size 33 *)
TYPE AOC33 = POINTER TO ARRAY [0..33] OF CHAR; (* size 34 *)
TYPE AOC34 = POINTER TO ARRAY [0..34] OF CHAR; (* size 35 *)
TYPE AOC35 = POINTER TO ARRAY [0..35] OF CHAR; (* size 36 *)
TYPE AOC36 = POINTER TO ARRAY [0..36] OF CHAR; (* size 37 *)
TYPE AOC37 = POINTER TO ARRAY [0..37] OF CHAR; (* size 38 *)
TYPE AOC38 = POINTER TO ARRAY [0..38] OF CHAR; (* size 39 *)
TYPE AOC39 = POINTER TO ARRAY [0..39] OF CHAR; (* size 40 *)
TYPE AOC40 = POINTER TO ARRAY [0..40] OF CHAR; (* size 41 *)
TYPE AOC41 = POINTER TO ARRAY [0..41] OF CHAR; (* size 42 *)
TYPE AOC42 = POINTER TO ARRAY [0..42] OF CHAR; (* size 43 *)
TYPE AOC43 = POINTER TO ARRAY [0..43] OF CHAR; (* size 44 *)
TYPE AOC44 = POINTER TO ARRAY [0..44] OF CHAR; (* size 45 *)
TYPE AOC45 = POINTER TO ARRAY [0..45] OF CHAR; (* size 46 *)
TYPE AOC46 = POINTER TO ARRAY [0..46] OF CHAR; (* size 47 *)
TYPE AOC47 = POINTER TO ARRAY [0..47] OF CHAR; (* size 48 *)
TYPE AOC48 = POINTER TO ARRAY [0..48] OF CHAR; (* size 49 *)
TYPE AOC49 = POINTER TO ARRAY [0..49] OF CHAR; (* size 50 *)
TYPE AOC50 = POINTER TO ARRAY [0..50] OF CHAR; (* size 51 *)
TYPE AOC51 = POINTER TO ARRAY [0..51] OF CHAR; (* size 52 *)
TYPE AOC52 = POINTER TO ARRAY [0..52] OF CHAR; (* size 53 *)
TYPE AOC53 = POINTER TO ARRAY [0..53] OF CHAR; (* size 54 *)
TYPE AOC54 = POINTER TO ARRAY [0..54] OF CHAR; (* size 55 *)
TYPE AOC55 = POINTER TO ARRAY [0..55] OF CHAR; (* size 56 *)
TYPE AOC56 = POINTER TO ARRAY [0..56] OF CHAR; (* size 57 *)
TYPE AOC57 = POINTER TO ARRAY [0..57] OF CHAR; (* size 58 *)
TYPE AOC58 = POINTER TO ARRAY [0..58] OF CHAR; (* size 59 *)
TYPE AOC59 = POINTER TO ARRAY [0..59] OF CHAR; (* size 60 *)
TYPE AOC60 = POINTER TO ARRAY [0..60] OF CHAR; (* size 61 *)
TYPE AOC61 = POINTER TO ARRAY [0..61] OF CHAR; (* size 62 *)
TYPE AOC62 = POINTER TO ARRAY [0..62] OF CHAR; (* size 63 *)
TYPE AOC63 = POINTER TO ARRAY [0..63] OF CHAR; (* size 64 *)
TYPE AOC64 = POINTER TO ARRAY [0..64] OF CHAR; (* size 65 *)
TYPE AOC65 = POINTER TO ARRAY [0..65] OF CHAR; (* size 66 *)
TYPE AOC66 = POINTER TO ARRAY [0..66] OF CHAR; (* size 67 *)
TYPE AOC67 = POINTER TO ARRAY [0..67] OF CHAR; (* size 68 *)
TYPE AOC68 = POINTER TO ARRAY [0..68] OF CHAR; (* size 69 *)
TYPE AOC69 = POINTER TO ARRAY [0..69] OF CHAR; (* size 70 *)
TYPE AOC70 = POINTER TO ARRAY [0..70] OF CHAR; (* size 71 *)
TYPE AOC71 = POINTER TO ARRAY [0..71] OF CHAR; (* size 72 *)
TYPE AOC72 = POINTER TO ARRAY [0..72] OF CHAR; (* size 73 *)
TYPE AOC73 = POINTER TO ARRAY [0..73] OF CHAR; (* size 74 *)
TYPE AOC74 = POINTER TO ARRAY [0..74] OF CHAR; (* size 75 *)
TYPE AOC75 = POINTER TO ARRAY [0..75] OF CHAR; (* size 76 *)
TYPE AOC76 = POINTER TO ARRAY [0..76] OF CHAR; (* size 77 *)
TYPE AOC77 = POINTER TO ARRAY [0..77] OF CHAR; (* size 78 *)
TYPE AOC78 = POINTER TO ARRAY [0..78] OF CHAR; (* size 79 *)
TYPE AOC79 = POINTER TO ARRAY [0..79] OF CHAR; (* size 80 *)

(* size increments of 8 *)
TYPE AOC87 = POINTER TO ARRAY [0..87] OF CHAR; (* size 88 *)
TYPE AOC95 = POINTER TO ARRAY [0..95] OF CHAR; (* size 96 *)

(* size increments of 16 *)
TYPE AOC111 = POINTER TO ARRAY [0..111] OF CHAR; (* size 112 *)
TYPE AOC127 = POINTER TO ARRAY [0..127] OF CHAR; (* size 128 *)

(* size increments of 64 *)
TYPE AOC191 = POINTER TO ARRAY [0..191] OF CHAR; (* size 192 *)
TYPE AOC255 = POINTER TO ARRAY [0..255] OF CHAR; (* size 256 *)

(* size increments of 256 *)
TYPE AOC511  = POINTER TO ARRAY [0.. 511] OF CHAR; (* size  512 *)
TYPE AOC767  = POINTER TO ARRAY [0.. 767] OF CHAR; (* size  768 *)
TYPE AOC1023 = POINTER TO ARRAY [0..1023] OF CHAR; (* size 1024 *)
TYPE AOC1279 = POINTER TO ARRAY [0..1279] OF CHAR; (* size 1280 *)
TYPE AOC1535 = POINTER TO ARRAY [0..1535] OF CHAR; (* size 1536 *)
TYPE AOC1791 = POINTER TO ARRAY [0..1791] OF CHAR; (* size 1792 *)
TYPE AOC2047 = POINTER TO ARRAY [0..2047] OF CHAR; (* size 2048 *)
TYPE AOC2559 = POINTER TO ARRAY [0..2559] OF CHAR; (* size 2560 *)
TYPE AOC3071 = POINTER TO ARRAY [0..3071] OF CHAR; (* size 3072 *)
TYPE AOC4095 = POINTER TO ARRAY [0..4095] OF CHAR; (* size 4096 *)


(* Alias for largest AOC pointer type *)

TYPE Largest = AOC4095;


(* ---------------------------------------------------------------------------
 * function allocSizeForStrLen(strlen)
 * ---------------------------------------------------------------------------
 * Returns the allocation size for an AOC type of length strlen as follows:
 * 
 * case | strlen       | offset | size      | type
 * -----+--------------+--------+-----------+-----------
 *  (0) |    0 ..   79 |     +1 |  strlen+1 | AOC0-AOC79
 * -----+--------------+--------+-----------+-----------
 *  (1) |   80 ..   87 |     +8 |        88 |      AOC87
 *  (2) |   88 ..   95 |     +8 |        96 |      AOC95
 * -----+--------------+--------+-----------+-----------
 *  (3) |   96 ..  111 |    +16 |       112 |     AOC111
 *  (4) |  112 ..  127 |    +16 |       128 |     AOC127
 * -----+--------------+--------+-----------+-----------
 *  (5) |  128 ..  191 |    +64 |       192 |     AOC191
 *  (6) |  192 ..  255 |    +64 |       256 |     AOC255
 * -----+--------------+--------+-----------+-----------
 *  (7) |  256 ..  511 |   +256 |       512 |     AOC511
 *  (8) |  512 ..  767 |   +256 |       768 |     AOC767
 *  (9) |  768 .. 1023 |   +256 |      1024 |    AOC1023
 * (10) | 1024 .. 1279 |   +256 |      1280 |    AOC1279
 * (11) | 1280 .. 1535 |   +256 |      1536 |    AOC1535
 * (12) | 1536 .. 1791 |   +256 |      1792 |    AOC1791
 * (13) | 1792 .. 2047 |   +256 |      2048 |    AOC2047
 * (14) | 2048 .. 2559 |   +512 |      2560 |    AOC2559
 * (15) | 2560 .. 3071 |   +512 |      3072 |    AOC3071
 * -----+--------------+--------+-----------+-----------
 * (16) |      >= 3072 |  +1024 | MaxLength |    Largest
 * ------------------------------------------------------------------------ *)

PROCEDURE allocSizeForStrLen ( strlen : CARDINAL ) : CARDINAL;


END StrPtr.